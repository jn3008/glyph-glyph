import{d as X,a as n,c as _e,t as g,h as Se}from"../chunks/disclose-version.CYEZbGRd.js";import{i as re}from"../chunks/legacy.Dizh_e1X.js";import{p as oe,l as G,i as ne,c as i,k as e,az as fe,t as S,r as a,s as w,f as te,a as le,m as x,j as f,T as se,u as Y,$ as qe}from"../chunks/utils.DXvTgAFw.js";import{s as J,e as ae}from"../chunks/render.BS6rv_sO.js";import{s as ie,i as O,a as E,b as ge}from"../chunks/store.DLGdLQ_h.js";import{e as K,B as W,u as Ae,q as N,v as Le,w as he,a as Z,x as Te,y as je,s as xe,g as ce,c as ye,b as ke,p as Be,z as He,i as ze,l as Me,t as me,f as De}from"../chunks/glyphs.DI0hEd2V.js";import{B as Ie}from"../chunks/BottomBar.kOKUJFzP.js";import{a as $e,i as Pe,g as Ge,h as Oe,H as Fe,q as be,t as Ue}from"../chunks/times.DNwZd9S2.js";import{p as We}from"../chunks/props.Ce0yfSwg.js";import{g as Ce}from"../chunks/index.DrMsbBsN.js";import{t as Ee,a as Je,s as ee,b as Ke}from"../chunks/settings.BEngTEVy.js";import{a as Ne}from"../chunks/appearance.C6lf8wZM.js";import{o as Qe}from"../chunks/index-client.SJPFcUSQ.js";var Re=g('<div><div class="sub-selection svelte-1owkum0"></div></div>'),Ve=g('<div><div class="alphabet-selection-container svelte-1owkum0"><div class="selection alphabet svelte-1owkum0"></div></div> <div class="selections-container svelte-1owkum0"></div></div>');function Xe(v,r){oe(r,!1);const d=ie(),o=()=>E(ce,"$game_config",d),s=x(),P=x();let h=x(10);G(()=>o(),()=>{var _;f(s,(_=o())==null?void 0:_.path)}),G(()=>e(s),()=>{f(P,e(s)[0])}),G(()=>e(s),()=>{setTimeout(()=>{f(h,e(s).length)},1)}),ne(),re();var $=Ve(),b=i($),j=i(b);K(j,5,()=>Le,N,(_,u)=>{var q=se(()=>e(P)===e(u).key);W(_,{get selected(){return e(q)},get title(){return`Select ${e(u).label??""}`},$$events:{click:()=>Ae(e(u).key,0)},children:(B,c)=>{fe();var t=X();S(()=>J(t,e(u).label)),n(B,t)},$$slots:{default:!0}})}),a(j),a(b);var y=w(b,2);K(y,5,()=>Array.from({length:e(s).length},(_,u)=>u+1),N,(_,u)=>{var q=_e(),B=te(q);{var c=t=>{var l=Re();S(()=>Z(l,"data-label",Te(e(s).slice(0,e(u)))));var m=i(l);K(m,5,()=>he(e(s).slice(0,e(u))),N,(H,A)=>{var z=se(()=>e(s)[e(u)]===e(A).key);W(H,{get selected(){return e(z)},get title(){return`Select ${e(A).label??""}`},$$events:{click:()=>je(e(A).key,e(u))},children:(M,p)=>{fe();var k=X();S(()=>J(k,e(A).label)),n(M,k)},$$slots:{default:!0}})}),a(m),a(l),S(()=>xe(l,`sub-selection-container ${(e(u)<=e(h)?"visible":"")??""} svelte-1owkum0`)),n(t,l)};O(B,t=>{he(e(s).slice(0,e(u))).length>0&&t(c)})}n(_,q)}),a(y),a($),n(v,$),le()}function we(v,r){if(!r)return"";if(Pe(v))return r.join(" ");const d=r.length/3;let o=[];for(let s=0;s<d;s++){const P=r[s*3],h=r[s*3+1],$=r[s*3+2];o.push(`<b>${h}</b> as in ${P}<b>${h}</b>${$}`)}return o.join(" ")}function Ye(v){var d;const r=(d=Ce(ce))==null?void 0:d.path;switch(r[0]){case"greek":return we(v.toLowerCase(),ke.pronunciations[v.toLowerCase()]);case"cyrillic":{const o=ye.pronunciations[r[1]];return we(v.toLowerCase(),o[v.toLowerCase()])}default:return""}}function V(v){let r=[];for(let d=0;d<v.length;d++)r.push(`[${v[d]}]`);return r.join(" ")}function Ze(v){var d;const r=(d=Ce(ce))==null?void 0:d.path_dict;switch(r.alphabet){case"kana":return V(He.sounds[ze(v)]);case"greek":return V(ke.sounds[v.toLowerCase()]);case"cyrillic":{const o=ye.sounds[r.language];return V(o[v.toLowerCase()])}case"persoarabic":{const o=Be.sounds[r.language];switch(r.language){case"arabic":{const s=o[r.pronunciation];return V(s[$e(v)])}default:return V(o[$e(v)])}}default:return""}}var et=g('<span class="glyph-tooltip"> <span class="ipa-style svelte-ql9r18"> </span></span>'),tt=g('<div class="preview-item svelte-ql9r18"><div class="glyph-container svelte-ql9r18" role="tooltip"><span class="glyph svelte-ql9r18"> </span> <!></div></div>'),st=g('<div class="pronunciations-container svelte-ql9r18"><span class="pronunciations svelte-ql9r18"><!></span></div>'),at=g('<div class="preview-container svelte-ql9r18"><div><div class="preview-title svelte-ql9r18"><span style="font-weight: 600;">Glyphs you will be tested on:</span><br> (hover/tap on glyphs to learn the answers).</div> <div class="glyphs-container"></div></div> <!></div>');function rt(v,r){oe(r,!1);const d=ie(),o=()=>E(Me,"$glyphs_list",d),s=x(),P=x();let h=We(r,"show_pronunciations",8),$=x(null),b=x(null);function j(c){f($,c),f(b,Ye(e($)))}G(()=>o(),()=>{f(s,o())}),G(()=>e(b),()=>{f(P,e(b)!=null&&e(b).length>0)}),ne(),re();var y=at(),_=i(y),u=w(i(_),2);K(u,5,()=>e(s),N,(c,t)=>{var l=tt(),m=i(l),H=i(m),A=i(H,!0);a(H);var z=w(H,2);{var M=p=>{var k=et(),L=i(k);S(()=>J(L,`${(Pe(e(t))?"Silent":Ge(e(t)).join(" / "))??""} `));var D=w(L),C=i(D,!0);S(()=>J(C,Ze(e(t)))),a(D),a(k),n(p,k)};O(z,p=>{e($)==e(t)&&p(M)})}a(m),a(l),S(()=>J(A,e(t))),ae("mouseenter",m,()=>{j(e(t))}),ae("mouseleave",m,()=>{f($,f(b,null))}),n(c,l)}),a(u),a(_);var q=w(_,2);{var B=c=>{var t=st(),l=i(t),m=i(l);Oe(m,()=>e(b)),a(l),a(t),S(()=>me(l,"is-active",e(P))),n(c,t)};O(q,c=>{h()&&c(B)})}a(y),n(v,y),le()}var ot=g('<div class="button-container svelte-hddb9r"><button type="button" class="color-button appearance svelte-hddb9r"><span class="material-symbols-rounded icon svelte-hddb9r"><!></span></button></div>'),nt=g('<div class="button-container svelte-hddb9r"><button type="button"></button></div>'),lt=g('<span class="material-symbols-rounded palette-icon svelte-hddb9r">palette</span>'),it=g('<div class="palette-container svelte-hddb9r"><div class="palette-drawer-contents svelte-hddb9r"><div class="palette svelte-hddb9r"></div> <div class="palette colours svelte-hddb9r"></div></div> <!></div>');function ct(v,r){oe(r,!1);const d=ie(),o=()=>E(ee,"$settings",d),s=()=>E(Ne,"$appearance_store",d),P=x();let h=x(!1);const $=c=>{ge(ee,Y(o).appearance=c,Y(o))},b=c=>{ge(ee,Y(o).colour=c,Y(o))};G(()=>o(),()=>{f(P,o().colour)}),ne(),re();var j=it(),y=i(j),_=i(y);K(_,5,()=>Ee,N,(c,t)=>{var l=_e(),m=te(l);{var H=A=>{var z=ot(),M=i(z),p=i(M),k=i(p);{var L=C=>{var I=X("brightness_auto");n(C,I)},D=C=>{var I=_e(),ve=te(I);{var pe=U=>{var Q=X("dark_mode");n(U,Q)},de=U=>{var Q=X("light_mode");n(U,Q)};O(ve,U=>{e(t)==="dark"?U(pe):U(de,!1)},!0)}n(C,I)};O(k,C=>{e(t)==="auto"?C(L):C(D,!1)})}a(p),a(M),a(z),S(()=>Z(M,"aria-label",`Set theme appearance to ${e(t)}`)),ae("click",M,()=>$(e(t))),n(A,z)};O(m,A=>{o().appearance!==e(t)&&A(H)})}n(c,l)}),a(_);var u=w(_,2);K(u,5,()=>Je,N,(c,t)=>{var l=nt(),m=i(l);a(l),S(()=>{xe(m,`color-button ${s()??""}-theme-${e(t)??""} ${(e(t)===e(P)?"active":"")??""} svelte-hddb9r`),Z(m,"aria-label",`Set theme colour to ${e(t)}`),Z(m,"title",`Pick ${e(t)}`)}),ae("click",m,()=>b(e(t))),n(c,l)}),a(u),a(y);var q=w(y,2),B=se(()=>`${(e(h)?"Close":"Open")??""} palette`);W(q,{style:"small-icon",get title(){return e(B)},$$events:{click:()=>f(h,!e(h))},children:(c,t)=>{var l=lt();n(c,l)},$$slots:{default:!0}}),a(j),S(()=>me(y,"open",e(h))),n(v,j),le()}var vt=g('<span class="material-symbols-rounded small-icon svelte-1pm7xpu">help</span>'),pt=g('<div class="config-container svelte-1pm7xpu"><div class="config-title-container svelte-1pm7xpu"><div class="content-width config-title svelte-1pm7xpu"><span class="config-title-text svelte-1pm7xpu">Choose your configuration</span></div></div> <!> <!></div>'),dt=g('<span class="button-content svelte-1pm7xpu"><span class="button-text svelte-1pm7xpu">Use Stopwatch</span> <span class="material-symbols-rounded icon svelte-1pm7xpu">timer</span></span>'),ut=g('<span class="high-score svelte-1pm7xpu"> </span>'),_t=g('<span class="button-content svelte-1pm7xpu"><span class="button-text svelte-1pm7xpu">Start</span> <span class="material-symbols-rounded icon svelte-1pm7xpu">arrow_forward</span></span>'),mt=g('<span class="button-content svelte-1pm7xpu"><span class="button-text svelte-1pm7xpu">Start</span> <span class="material-symbols-rounded icon svelte-1pm7xpu">arrow_forward</span></span>'),ft=g('<div class="stopwatch-section svelte-1pm7xpu"><!> <!></div> <!>',1),gt=g('<div class="contents svelte-1pm7xpu"><div class="top-bar svelte-1pm7xpu"><div class="title-container svelte-1pm7xpu"><a href="/" class="title svelte-1pm7xpu">glyph-glyph</a> <!></div> <span class="palette"><!></span></div> <!> <!> <!></div>');function Tt(v,r){oe(r,!1);const d=ie(),o=()=>E(ee,"$settings",d),s=()=>E(ce,"$game_config",d),P=()=>E(Ue,"$times_store",d),h=x(),$=x(),b=x(),j=x();let y=x(!0),_=x(!1);Qe(()=>{const p=be.subscribe(()=>{f(y,!1)});return()=>p()});const u=`Learn an alphabet or test your knowledge by choosing your 
  game configuration.

Once a configuration is valid, a preview of the set of glyphs will appear;
   hover/tap on a glyph to see its answer (romanisation/name).

When you're ready press "Start".`;G(()=>o(),()=>{f(h,o().stopwatch_enabled)}),G(()=>s(),()=>{f($,s().id)}),G(()=>(P(),e($)),()=>{f(b,P().best_times[e($)])}),G(()=>s(),()=>{var p;f(j,["greek","cyrillic"].includes((p=s())==null?void 0:p.path[0]))}),ne(),re();var q=gt();Se(p=>{qe.title="Setup Â· glyph-glyph"});var B=i(q),c=i(B),t=w(i(c),2);W(t,{style:"small-icon",title:"Help",$$events:{click:()=>f(_,!e(_))},children:(p,k)=>{var L=vt();n(p,L)},$$slots:{default:!0}}),a(c);var l=w(c,2),m=i(l);ct(m,{}),a(l),a(B);var H=w(B,2);{var A=p=>{var k=pt(),L=w(i(k),2);Xe(L,{});var D=w(L,2);{var C=I=>{rt(I,{get show_pronunciations(){return e(j)}})};O(D,I=>{s().is_valid&&I(C)})}a(k),n(p,k)};O(H,p=>{e(y)||p(A)})}var z=w(H,2);Fe(z,{instructions:u,get is_open(){return e(_)},set is_open(p){f(_,p)},$$legacy:!0});var M=w(z,2);Ie(M,{children:(p,k)=>{var L=ft(),D=te(L),C=i(D),I=se(()=>`Turn stopwatch ${(e(h)?"off":"on")??""}`);W(C,{get selected(){return e(h)},get title(){return e(I)},$$events:{click:()=>{Ke()}},children:(T,F)=>{var R=dt();n(T,R)},$$slots:{default:!0}});var ve=w(C,2);{var pe=T=>{var F=ut(),R=i(F);S(()=>J(R,`${De(e(b))??""}s`)),a(F),S(()=>me(F,"not-set",e(b)<0)),n(T,F)};O(ve,T=>{s().is_valid&&e(h)&&T(pe)})}a(D);var de=w(D,2);{var U=T=>{W(T,{href:"play",selected:!0,title:"Start game",$$events:{click:()=>{be.reset()}},children:(F,R)=>{var ue=_t();n(F,ue)},$$slots:{default:!0}})},Q=T=>{W(T,{active:!1,children:(F,R)=>{var ue=mt();n(F,ue)},$$slots:{default:!0}})};O(de,T=>{s().is_valid?T(U):T(Q,!1)})}n(p,L)},$$slots:{default:!0}}),a(q),n(v,q),le()}export{Tt as component};
