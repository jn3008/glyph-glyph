import{d as V,a as l,c as ue,t as _,h as Se}from"../chunks/disclose-version.DMb1MWqK.js";import{i as se}from"../chunks/legacy.CAdgRAij.js";import{p as re,a9 as I,aa as oe,c,y as e,ax as me,t as B,r as s,s as P,f as ee,a as ne,ay as C,w as g,N as te,u as X,az as Ce}from"../chunks/utils.CzggQQeO.js";import{s as E,e as ae}from"../chunks/render.CfWNEYHW.js";import{s as le,i as M,a as U,b as fe}from"../chunks/store.OBsKuDGv.js";import{m as J,B as N,u as Ae,n as K,q as Le,r as ge,a as Y,v as Be,w as He,s as we,f as ie,c as ye,g as ke,p as Te,x as je,t as qe,i as Me,o as _e,y as ze}from"../chunks/dictionary.D-f1v8xe.js";import{B as De}from"../chunks/BottomBar.BIDcyHu6.js";import{g as he,i as xe,a as Ie,h as Ge,H as Oe,q as $e,b as Fe}from"../chunks/scores.DHawOXJF.js";import{p as Ne}from"../chunks/props.BU03OgPP.js";import{g as Pe}from"../chunks/index.B9HqKKT-.js";import{t as Ue,a as We,s as Z,b as Ee}from"../chunks/settings.DiEyKd8D.js";import{a as Je}from"../chunks/appearance._Pf7IuiS.js";import{o as Ke}from"../chunks/index-client.ZNqWNHHH.js";var Qe=_('<div><div class="sub-selection svelte-cfhpm1"></div></div>'),Re=_('<div><div class="alphabet-selection-container svelte-cfhpm1"><div class="selection alphabet svelte-cfhpm1"></div></div> <div class="selections-container svelte-cfhpm1"></div></div>');function Ve(v,r){re(r,!1);const d=le(),t=()=>U(ie,"$game_config",d),o=C(),S=C();let h=C(10);I(()=>t(),()=>{var m;g(o,(m=t())==null?void 0:m.path)}),I(()=>e(o),()=>{g(S,e(o)[0])}),I(()=>e(o),()=>{setTimeout(()=>{g(h,e(o).length)},1)}),oe(),se();var $=Re(),k=c($),j=c(k);J(j,5,()=>Le,K,(m,u)=>{var H=te(()=>e(S)===e(u).key);N(m,{get selected(){return e(H)},get title(){return`Select ${e(u).label??""}`},$$events:{click:()=>Ae(e(u).key,0)},children:(f,i)=>{me();var a=V();B(()=>E(a,e(u).label)),l(f,a)},$$slots:{default:!0}})}),s(j),s(k);var b=P(k,2);J(b,5,()=>Array.from({length:e(o).length},(m,u)=>u+1),K,(m,u)=>{var H=ue(),f=ee(H);{var i=a=>{var p=Qe();B(()=>Y(p,"data-label",Be(e(o).slice(0,e(u)))));var w=c(p);J(w,5,()=>ge(e(o).slice(0,e(u))),K,(F,A)=>{var z=te(()=>e(o)[e(u)]===e(A).key);N(F,{get selected(){return e(z)},get title(){return`Select ${e(A).label??""}`},$$events:{click:()=>He(e(A).key,e(u))},children:(n,L)=>{me();var x=V();B(()=>E(x,e(A).label)),l(n,x)},$$slots:{default:!0}})}),s(w),s(p),B(()=>we(p,`sub-selection-container ${(e(u)<=e(h)?"visible":"")??""} svelte-cfhpm1`)),l(a,p)};M(f,a=>{ge(e(o).slice(0,e(u))).length>0&&a(i)})}l(m,H)}),s(b),s($),l(v,$),ne()}function be(v,r){if(!r)return"";if(xe(v))return r.join(" ");const d=r.length/3;let t=[];for(let o=0;o<d;o++){const S=r[o*3],h=r[o*3+1],$=r[o*3+2];t.push(`<b>${h}</b> as in ${S}<b>${h}</b>${$}`)}return t.join(" ")}function Xe(v){var d;const r=(d=Pe(ie))==null?void 0:d.path;switch(r[0]){case"greek":return be(v.toLowerCase(),ke.pronunciations[v.toLowerCase()]);case"cyrillic":{const t=ye.pronunciations[r[1]];return be(v.toLowerCase(),t[v.toLowerCase()])}default:return""}}function R(v){let r=[];for(let d=0;d<v.length;d++)r.push(`[${v[d]}]`);return r.join(" ")}function Ye(v){var d;const r=(d=Pe(ie))==null?void 0:d.path_dict;switch(r.alphabet){case"kana":return R(je.sounds[qe(v)]);case"greek":return R(ke.sounds[v.toLowerCase()]);case"cyrillic":{const t=ye.sounds[r.languages];return R(t[v.toLowerCase()])}case"persoarabic":{const t=Te.sounds[r.language];switch(r.language){case"arabic":{const o=t[r.pronunciation];return R(o[he(v)])}default:return R(t[he(v)])}}default:return""}}var Ze=_('<span class="glyph-info svelte-1ht9205"> <span class="ipa-style svelte-1ht9205"> </span></span>'),et=_('<div class="preview-item svelte-1ht9205"><div class="glyph-container svelte-1ht9205" role="tooltip"><span class="glyph svelte-1ht9205"> </span> <!></div></div>'),tt=_('<div class="pronunciations-container svelte-1ht9205"><span class="pronunciations svelte-1ht9205"><!></span></div>'),at=_('<div class="preview-container svelte-1ht9205"><div class="preview-title svelte-1ht9205">Glyphs to test:</div> <div class="glyphs-container svelte-1ht9205"></div> <!></div>');function st(v,r){re(r,!1);const d=le(),t=()=>U(Me,"$dictionary",d),o=C(),S=C();let h=Ne(r,"show_pronunciations",8),$=C(null),k=C(null);function j(f){g($,f),g(k,Xe(e($)))}I(()=>t(),()=>{g(o,t())}),I(()=>e(k),()=>{g(S,e(k)!=null&&e(k).length>0)}),oe(),se();var b=at(),m=P(c(b),2);J(m,5,()=>e(o),K,(f,i)=>{var a=et(),p=c(a),w=c(p),F=c(w,!0);s(w);var A=P(w,2);{var z=n=>{var L=Ze(),x=c(L);B(()=>E(x,`${(xe(e(i))?"Silent":Ie(e(i)).join(" / "))??""} `));var q=P(x),G=c(q,!0);B(()=>E(G,Ye(e(i)))),s(q),s(L),l(n,L)};M(A,n=>{e($)==e(i)&&n(z)})}s(p),s(a),B(()=>E(F,e(i))),ae("mouseenter",p,()=>{j(e(i))}),ae("mouseleave",p,()=>{g($,g(k,null))}),l(f,a)}),s(m);var u=P(m,2);{var H=f=>{var i=tt(),a=c(i),p=c(a);Ge(p,()=>e(k)),s(a),s(i),B(()=>_e(a,"is-active",e(S))),l(f,i)};M(u,f=>{h()&&f(H)})}s(b),l(v,b),ne()}var rt=_('<div class="button-container svelte-g3lcde"><button type="button" class="color-button appearance svelte-g3lcde"><span class="material-symbols-rounded icon svelte-g3lcde"><!></span></button></div>'),ot=_('<div class="button-container svelte-g3lcde"><button type="button"></button></div>'),nt=_('<span class="material-symbols-rounded palette-icon svelte-g3lcde">palette</span>'),lt=_('<div class="palette-container svelte-g3lcde"><div class="palette-drawer-contents svelte-g3lcde"><div class="palette svelte-g3lcde"></div> <div class="palette colour svelte-g3lcde"></div></div> <!></div>');function it(v,r){re(r,!1);const d=le(),t=()=>U(Z,"$settings",d),o=()=>U(Je,"$appearance_store",d),S=C();let h=C(!1);const $=i=>{fe(Z,X(t).appearance=i,X(t))},k=i=>{fe(Z,X(t).colour=i,X(t))};I(()=>t(),()=>{g(S,t().colour)}),oe(),se();var j=lt(),b=c(j),m=c(b);J(m,5,()=>Ue,K,(i,a)=>{var p=ue(),w=ee(p);{var F=A=>{var z=rt(),n=c(z),L=c(n),x=c(L);{var q=T=>{var W=V("brightness_auto");l(T,W)},G=T=>{var W=ue(),ce=ee(W);{var ve=O=>{var y=V("dark_mode");l(O,y)},pe=O=>{var y=V("light_mode");l(O,y)};M(ce,O=>{e(a)==="dark"?O(ve):O(pe,!1)},!0)}l(T,W)};M(x,T=>{e(a)==="auto"?T(q):T(G,!1)})}s(L),s(n),s(z),B(()=>Y(n,"aria-label",`Set theme appearance to ${e(a)}`)),ae("click",n,()=>$(e(a))),l(A,z)};M(w,A=>{t().appearance!==e(a)&&A(F)})}l(i,p)}),s(m);var u=P(m,2);J(u,5,()=>We,K,(i,a)=>{var p=ot(),w=c(p);s(p),B(()=>{we(w,`color-button ${o()??""}-theme-${e(a)??""} ${(e(a)===e(S)?"active":"")??""} svelte-g3lcde`),Y(w,"aria-label",`Set theme colour to ${e(a)}`),Y(w,"title",`Pick ${e(a)}`)}),ae("click",w,()=>k(e(a))),l(i,p)}),s(u),s(b);var H=P(b,2),f=te(()=>`${(e(h)?"Close":"Open")??""} palette`);N(H,{style:"small-icon",get title(){return e(f)},$$events:{click:()=>g(h,!e(h))},children:(i,a)=>{var p=nt();l(i,p)},$$slots:{default:!0}}),s(j),B(()=>_e(b,"open",e(h))),l(v,j),ne()}var ct=_('<span class="material-symbols-rounded small-icon svelte-ar05pm">help</span>'),vt=_('<div class="config-container svelte-ar05pm"><!> <!></div>'),pt=_('<span class="button-content svelte-ar05pm"><span class="button-text svelte-ar05pm">Use Stopwatch</span> <span class="material-symbols-rounded icon svelte-ar05pm">timer</span></span>'),dt=_('<span class="high-score svelte-ar05pm"> </span>'),ut=_('<span class="button-content svelte-ar05pm"><span class="button-text svelte-ar05pm">Start</span> <span class="material-symbols-rounded icon svelte-ar05pm">arrow_forward</span></span>'),_t=_('<span class="button-content svelte-ar05pm"><span class="button-text svelte-ar05pm">Start</span> <span class="material-symbols-rounded icon svelte-ar05pm">arrow_forward</span></span>'),mt=_('<div class="stopwatch-section svelte-ar05pm"><!> <!></div> <!>',1),ft=_('<div class="contents svelte-ar05pm"><div class="top-bar svelte-ar05pm"><div class="title-container svelte-ar05pm"><a href="/" class="title svelte-ar05pm">glyph-glyph</a> <!></div> <span class="palette"><!></span></div> <!> <!> <!></div>');function Bt(v,r){re(r,!1);const d=le(),t=()=>U(ie,"$game_config",d),o=()=>U(Fe,"$high_scores",d),S=()=>U(Z,"$settings",d),h=C(),$=C(),k=C();let j=C(!0);Ke(()=>{const n=$e.subscribe(()=>{g(j,!1)});return()=>n()});let b=C(!1);const m=`Learn an alphabet or test your knowledge by piacking your 
  game configuration.

Once a configuration is valid, a preview of the set of glyphs will appear;
   hover/tap on a glyph to see its answer (romanisation/name).

When you're ready press "Start".`;I(()=>t(),()=>{g(h,t().id)}),I(()=>(o(),e(h)),()=>{g($,o()[e(h)])}),I(()=>t(),()=>{var n;g(k,["greek","cyrillic"].includes((n=t())==null?void 0:n.path[0]))}),oe(),se();var u=ft();Se(n=>{Ce.title="Setup Â· glyph-glyph"});var H=c(u),f=c(H),i=P(c(f),2);N(i,{style:"small-icon",title:"Help",$$events:{click:()=>g(b,!e(b))},children:(n,L)=>{var x=ct();l(n,x)},$$slots:{default:!0}}),s(f);var a=P(f,2),p=c(a);it(p,{}),s(a),s(H);var w=P(H,2);{var F=n=>{var L=vt(),x=c(L);Ve(x,{});var q=P(x,2);{var G=T=>{st(T,{get show_pronunciations(){return e(k)}})};M(q,T=>{t().is_valid&&T(G)})}s(L),l(n,L)};M(w,n=>{e(j)||n(F)})}var A=P(w,2);Oe(A,{instructions:m,get is_open(){return e(b)},set is_open(n){g(b,n)},$$legacy:!0});var z=P(A,2);De(z,{children:(n,L)=>{var x=mt(),q=ee(x),G=c(q),T=te(()=>`Turn stopwatch ${(S().using_stopwatch?"off":"on")??""}`);N(G,{get selected(){return S().using_stopwatch},get title(){return e(T)},$$events:{click:()=>{Ee()}},children:(y,D)=>{var Q=pt();l(y,Q)},$$slots:{default:!0}});var W=P(G,2);{var ce=y=>{var D=dt(),Q=c(D);B(()=>E(Q,`${ze(e($))??""}s`)),s(D),B(()=>_e(D,"not-set",e($)<0)),l(y,D)};M(W,y=>{t().is_valid&&S().using_stopwatch&&y(ce)})}s(q);var ve=P(q,2);{var pe=y=>{N(y,{href:"play",selected:!0,title:"Start game",$$events:{click:()=>{$e.reset()}},children:(D,Q)=>{var de=ut();l(D,de)},$$slots:{default:!0}})},O=y=>{N(y,{active:!1,children:(D,Q)=>{var de=_t();l(D,de)},$$slots:{default:!0}})};M(ve,y=>{t().is_valid?y(pe):y(O,!1)})}l(n,x)},$$slots:{default:!0}}),s(u),l(v,u),ne()}export{Bt as component};
