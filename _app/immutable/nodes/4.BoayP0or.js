import{d as X,a as n,c as _e,t as m,h as Pe}from"../chunks/disclose-version.CYEZbGRd.js";import{i as re}from"../chunks/legacy.Dizh_e1X.js";import{p as oe,l as G,i as ne,c as i,k as e,az as ge,t as P,r as a,s as w,f as te,a as le,m as x,j as g,T as se,u as Y,$ as Ce}from"../chunks/utils.DXvTgAFw.js";import{s as J,e as ae}from"../chunks/render.BS6rv_sO.js";import{s as ie,i as O,a as E,b as me}from"../chunks/store.DLGdLQ_h.js";import{e as K,B as W,u as Se,q as N,v as Ae,w as $e,a as Z,x as Le,y as Te,s as xe,g as ce,c as ye,b as ke,p as je,z as Be,i as He,l as Me,t as fe,f as De}from"../chunks/glyphs.BZE3epMA.js";import{B as Ie}from"../chunks/BottomBar.boK70mLU.js";import{a as he,i as qe,g as Ge,h as Oe,H as Fe,q as be,t as Ue}from"../chunks/times.8riW38Ab.js";import{p as We}from"../chunks/props.Ce0yfSwg.js";import{g as ze}from"../chunks/index.DrMsbBsN.js";import{t as Ee,a as Je,s as ee,b as Ke}from"../chunks/settings.BEngTEVy.js";import{a as Ne}from"../chunks/appearance.C6lf8wZM.js";import{o as Qe}from"../chunks/index-client.SJPFcUSQ.js";var Re=m('<div><div class="sub-selection svelte-1owkum0"></div></div>'),Ve=m('<div><div class="alphabet-selection-container svelte-1owkum0"><div class="selection alphabet svelte-1owkum0"></div></div> <div class="selections-container svelte-1owkum0"></div></div>');function Xe(v,r){oe(r,!1);const p=ie(),o=()=>E(ce,"$game_config",p),s=x(),q=x();let $=x(10);G(()=>o(),()=>{var _;g(s,(_=o())==null?void 0:_.path)}),G(()=>e(s),()=>{g(q,e(s)[0])}),G(()=>e(s),()=>{setTimeout(()=>{g($,e(s).length)},1)}),ne(),re();var h=Ve(),b=i(h),T=i(b);K(T,5,()=>Ae,N,(_,u)=>{var C=se(()=>e(q)===e(u).key);W(_,{get selected(){return e(C)},get title(){return`Select ${e(u).label??""}`},$$events:{click:()=>Se(e(u).key,0)},children:(j,c)=>{ge();var t=X();P(()=>J(t,e(u).label)),n(j,t)},$$slots:{default:!0}})}),a(T),a(b);var y=w(b,2);K(y,5,()=>Array.from({length:e(s).length},(_,u)=>u+1),N,(_,u)=>{var C=_e(),j=te(C);{var c=t=>{var l=Re();P(()=>Z(l,"data-label",Le(e(s).slice(0,e(u)))));var f=i(l);K(f,5,()=>$e(e(s).slice(0,e(u))),N,(B,S)=>{var H=se(()=>e(s)[e(u)]===e(S).key);W(B,{get selected(){return e(H)},get title(){return`Select ${e(S).label??""}`},$$events:{click:()=>Te(e(S).key,e(u))},children:(M,d)=>{ge();var k=X();P(()=>J(k,e(S).label)),n(M,k)},$$slots:{default:!0}})}),a(f),a(l),P(()=>xe(l,`sub-selection-container ${(e(u)<=e($)?"visible":"")??""} svelte-1owkum0`)),n(t,l)};O(j,t=>{$e(e(s).slice(0,e(u))).length>0&&t(c)})}n(_,C)}),a(y),a(h),n(v,h),le()}function we(v,r){if(!r)return"";if(qe(v))return r.join(" ");const p=r.length/3;let o=[];for(let s=0;s<p;s++){const q=r[s*3],$=r[s*3+1],h=r[s*3+2];o.push(`<b>${$}</b> as in ${q}<b>${$}</b>${h}`)}return o.join(" ")}function Ye(v){var p;const r=(p=ze(ce))==null?void 0:p.path;switch(r[0]){case"greek":return we(v.toLowerCase(),ke.pronunciations[v.toLowerCase()]);case"cyrillic":{const o=ye.pronunciations[r[1]];return we(v.toLowerCase(),o[v.toLowerCase()])}default:return""}}function V(v){let r=[];for(let p=0;p<v.length;p++)r.push(`[${v[p]}]`);return r.join(" ")}function Ze(v){var p;const r=(p=ze(ce))==null?void 0:p.path_dict;switch(r.alphabet){case"kana":return V(Be.sounds[He(v)]);case"greek":return V(ke.sounds[v.toLowerCase()]);case"cyrillic":{const o=ye.sounds[r.language];return V(o[v.toLowerCase()])}case"persoarabic":{const o=je.sounds[r.language];switch(r.language){case"arabic":{const s=o[r.pronunciation];return V(s[he(v)])}default:return V(o[he(v)])}}default:return""}}var et=m('<span class="glyph-tooltip"> <span class="ipa-style svelte-1rhu1vl"> </span></span>'),tt=m('<div class="preview-item svelte-1rhu1vl"><div class="glyph-container svelte-1rhu1vl" role="tooltip"><span class="glyph svelte-1rhu1vl"> </span> <!></div></div>'),st=m('<div class="pronunciations-container svelte-1rhu1vl"><span class="pronunciations svelte-1rhu1vl"><!></span></div>'),at=m('<div class="preview-container svelte-1rhu1vl"><div><div class="preview-title svelte-1rhu1vl">Glyphs to test:</div> <div class="glyphs-container"></div></div> <!></div>');function rt(v,r){oe(r,!1);const p=ie(),o=()=>E(Me,"$glyphs_list",p),s=x(),q=x();let $=We(r,"show_pronunciations",8),h=x(null),b=x(null);function T(c){g(h,c),g(b,Ye(e(h)))}G(()=>o(),()=>{g(s,o())}),G(()=>e(b),()=>{g(q,e(b)!=null&&e(b).length>0)}),ne(),re();var y=at(),_=i(y),u=w(i(_),2);K(u,5,()=>e(s),N,(c,t)=>{var l=tt(),f=i(l),B=i(f),S=i(B,!0);a(B);var H=w(B,2);{var M=d=>{var k=et(),A=i(k);P(()=>J(A,`${(qe(e(t))?"Silent":Ge(e(t)).join(" / "))??""} `));var D=w(A),z=i(D,!0);P(()=>J(z,Ze(e(t)))),a(D),a(k),n(d,k)};O(H,d=>{e(h)==e(t)&&d(M)})}a(f),a(l),P(()=>J(S,e(t))),ae("mouseenter",f,()=>{T(e(t))}),ae("mouseleave",f,()=>{g(h,g(b,null))}),n(c,l)}),a(u),a(_);var C=w(_,2);{var j=c=>{var t=st(),l=i(t),f=i(l);Oe(f,()=>e(b)),a(l),a(t),P(()=>fe(l,"is-active",e(q))),n(c,t)};O(C,c=>{$()&&c(j)})}a(y),n(v,y),le()}var ot=m('<div class="button-container svelte-g3lcde"><button type="button" class="color-button appearance svelte-g3lcde"><span class="material-symbols-rounded icon svelte-g3lcde"><!></span></button></div>'),nt=m('<div class="button-container svelte-g3lcde"><button type="button"></button></div>'),lt=m('<span class="material-symbols-rounded palette-icon svelte-g3lcde">palette</span>'),it=m('<div class="palette-container svelte-g3lcde"><div class="palette-drawer-contents svelte-g3lcde"><div class="palette svelte-g3lcde"></div> <div class="palette colour svelte-g3lcde"></div></div> <!></div>');function ct(v,r){oe(r,!1);const p=ie(),o=()=>E(ee,"$settings",p),s=()=>E(Ne,"$appearance_store",p),q=x();let $=x(!1);const h=c=>{me(ee,Y(o).appearance=c,Y(o))},b=c=>{me(ee,Y(o).colour=c,Y(o))};G(()=>o(),()=>{g(q,o().colour)}),ne(),re();var T=it(),y=i(T),_=i(y);K(_,5,()=>Ee,N,(c,t)=>{var l=_e(),f=te(l);{var B=S=>{var H=ot(),M=i(H),d=i(M),k=i(d);{var A=z=>{var I=X("brightness_auto");n(z,I)},D=z=>{var I=_e(),ve=te(I);{var de=U=>{var Q=X("dark_mode");n(U,Q)},pe=U=>{var Q=X("light_mode");n(U,Q)};O(ve,U=>{e(t)==="dark"?U(de):U(pe,!1)},!0)}n(z,I)};O(k,z=>{e(t)==="auto"?z(A):z(D,!1)})}a(d),a(M),a(H),P(()=>Z(M,"aria-label",`Set theme appearance to ${e(t)}`)),ae("click",M,()=>h(e(t))),n(S,H)};O(f,S=>{o().appearance!==e(t)&&S(B)})}n(c,l)}),a(_);var u=w(_,2);K(u,5,()=>Je,N,(c,t)=>{var l=nt(),f=i(l);a(l),P(()=>{xe(f,`color-button ${s()??""}-theme-${e(t)??""} ${(e(t)===e(q)?"active":"")??""} svelte-g3lcde`),Z(f,"aria-label",`Set theme colour to ${e(t)}`),Z(f,"title",`Pick ${e(t)}`)}),ae("click",f,()=>b(e(t))),n(c,l)}),a(u),a(y);var C=w(y,2),j=se(()=>`${(e($)?"Close":"Open")??""} palette`);W(C,{style:"small-icon",get title(){return e(j)},$$events:{click:()=>g($,!e($))},children:(c,t)=>{var l=lt();n(c,l)},$$slots:{default:!0}}),a(T),P(()=>fe(y,"open",e($))),n(v,T),le()}var vt=m('<span class="material-symbols-rounded small-icon svelte-1qzxpea">help</span>'),dt=m('<div class="config-container svelte-1qzxpea"><div class="config-title-container svelte-1qzxpea"><div class="content-width config-title svelte-1qzxpea"><span class="config-title-text svelte-1qzxpea">Choose your configuration</span></div></div> <!> <!></div>'),pt=m('<span class="button-content svelte-1qzxpea"><span class="button-text svelte-1qzxpea">Use Stopwatch</span> <span class="material-symbols-rounded icon svelte-1qzxpea">timer</span></span>'),ut=m('<span class="high-score svelte-1qzxpea"> </span>'),_t=m('<span class="button-content svelte-1qzxpea"><span class="button-text svelte-1qzxpea">Start</span> <span class="material-symbols-rounded icon svelte-1qzxpea">arrow_forward</span></span>'),ft=m('<span class="button-content svelte-1qzxpea"><span class="button-text svelte-1qzxpea">Start</span> <span class="material-symbols-rounded icon svelte-1qzxpea">arrow_forward</span></span>'),gt=m('<div class="stopwatch-section svelte-1qzxpea"><!> <!></div> <!>',1),mt=m('<div class="contents svelte-1qzxpea"><div class="top-bar svelte-1qzxpea"><div class="title-container svelte-1qzxpea"><a href="/" class="title svelte-1qzxpea">glyph-glyph</a> <!></div> <span class="palette"><!></span></div> <!> <!> <!></div>');function Lt(v,r){oe(r,!1);const p=ie(),o=()=>E(ee,"$settings",p),s=()=>E(ce,"$game_config",p),q=()=>E(Ue,"$times_store",p),$=x(),h=x(),b=x(),T=x();let y=x(!0),_=x(!1);Qe(()=>{const d=be.subscribe(()=>{g(y,!1)});return()=>d()});const u=`Learn an alphabet or test your knowledge by choosing your 
  game configuration.

Once a configuration is valid, a preview of the set of glyphs will appear;
   hover/tap on a glyph to see its answer (romanisation/name).

When you're ready press "Start".`;G(()=>o(),()=>{g($,o().stopwatch_enabled)}),G(()=>s(),()=>{g(h,s().id)}),G(()=>(q(),e(h)),()=>{g(b,q().best_times[e(h)])}),G(()=>s(),()=>{var d;g(T,["greek","cyrillic"].includes((d=s())==null?void 0:d.path[0]))}),ne(),re();var C=mt();Pe(d=>{Ce.title="Setup Â· glyph-glyph"});var j=i(C),c=i(j),t=w(i(c),2);W(t,{style:"small-icon",title:"Help",$$events:{click:()=>g(_,!e(_))},children:(d,k)=>{var A=vt();n(d,A)},$$slots:{default:!0}}),a(c);var l=w(c,2),f=i(l);ct(f,{}),a(l),a(j);var B=w(j,2);{var S=d=>{var k=dt(),A=w(i(k),2);Xe(A,{});var D=w(A,2);{var z=I=>{rt(I,{get show_pronunciations(){return e(T)}})};O(D,I=>{s().is_valid&&I(z)})}a(k),n(d,k)};O(B,d=>{e(y)||d(S)})}var H=w(B,2);Fe(H,{instructions:u,get is_open(){return e(_)},set is_open(d){g(_,d)},$$legacy:!0});var M=w(H,2);Ie(M,{children:(d,k)=>{var A=gt(),D=te(A),z=i(D),I=se(()=>`Turn stopwatch ${(e($)?"off":"on")??""}`);W(z,{get selected(){return e($)},get title(){return e(I)},$$events:{click:()=>{Ke()}},children:(L,F)=>{var R=pt();n(L,R)},$$slots:{default:!0}});var ve=w(z,2);{var de=L=>{var F=ut(),R=i(F);P(()=>J(R,`${De(e(b))??""}s`)),a(F),P(()=>fe(F,"not-set",e(b)<0)),n(L,F)};O(ve,L=>{s().is_valid&&e($)&&L(de)})}a(D);var pe=w(D,2);{var U=L=>{W(L,{href:"play",selected:!0,title:"Start game",$$events:{click:()=>{be.reset()}},children:(F,R)=>{var ue=_t();n(F,ue)},$$slots:{default:!0}})},Q=L=>{W(L,{active:!1,children:(F,R)=>{var ue=ft();n(F,ue)},$$slots:{default:!0}})};O(pe,L=>{s().is_valid?L(U):L(Q,!1)})}n(d,A)},$$slots:{default:!0}}),a(C),n(v,C),le()}export{Lt as component};
