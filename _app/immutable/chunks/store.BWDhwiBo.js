import{Z as A,h as o,d as I,_ as N,$ as m,a0 as R,a1 as D,a2 as d,a3 as h,a4 as v,a5 as g,a6 as S,U as x,a7 as F,Y as L,n as p,g as U,D as Y,B as Z}from"./utils.Orrw684n.js";function q(s,a,t=!1){o&&I();var e=s,r=null,n=null,i=x,y=t?N:0,l=!1;const T=(c,u=!0)=>{l=!0,_(u,c)},_=(c,u)=>{if(i===(i=c))return;let b=!1;if(o){const E=e.data===m;!!i===E&&(e=R(),D(e),d(!1),b=!0)}i?(r?h(r):u&&(r=v(()=>u(e))),n&&g(n,()=>{n=null})):(n?h(n):u&&(n=v(()=>u(e))),r&&g(r,()=>{r=null})),b&&d(!0)};A(()=>{l=!1,a(T),l||_(null,null)},y),o&&(e=S)}let f=!1;function w(s,a,t){const e=t[a]??(t[a]={store:null,source:L(void 0),unsubscribe:p});if(e.store!==s)if(e.unsubscribe(),e.store=s??null,s==null)e.source.v=void 0,e.unsubscribe=p;else{var r=!0;e.unsubscribe=U(s,n=>{r?e.source.v=n:Z(e.source,n)}),r=!1}return Y(e.source)}function B(){const s={};return F(()=>{for(var a in s)s[a].unsubscribe()}),s}function C(s,a,t){return s.set(t),a}function H(s){var a=f;try{return f=!1,[s(),f]}finally{f=a}}export{w as a,C as b,H as c,q as i,B as s};
