import{au as et,Z as tt,h as j,a1 as Y,d as nt,G as at,as as Se,$ as rt,a0 as he,a2 as V,a6 as K,aC as D,a3 as Ne,a4 as Te,a5 as st,E as de,aD as pe,aE as it,ar as ot,aF as ut,aG as ct,ak as lt,ao as ft,ah as ht,q as dt,aH as ee,aI as te,Y as pt,z as ge,aJ as Ce,aK as gt,aL as _t,am as mt}from"./utils.Dhw7Y63s.js";import{g as T,d as yt}from"./index.qhLCbthJ.js";import{c as Me,l as At}from"./settings._mfimNkJ.js";function Ln(e,t){return t}function bt(e,t,n,a){for(var r=[],s=t.length,i=0;i<s;i++)it(t[i].e,r,!0);var o=s>0&&r.length===0&&n!==null;if(o){var u=n.parentNode;ot(u),u.append(n),a.clear(),v(e,t[0].prev,t[s-1].next)}ut(r,()=>{for(var c=0;c<s;c++){var f=t[c];o||(a.delete(f.k),v(e,f.prev,f.next)),ct(f.e,!o)}})}function In(e,t,n,a,r,s=null){var i=e,o={flags:t,items:new Map,first:null},u=(t&Ce)!==0;if(u){var c=e;i=j?Y(lt(c)):c.appendChild(et())}j&&nt();var f=null,g=!1;tt(()=>{var y=n(),l=at(y)?y:y==null?[]:Se(y),d=l.length;if(g&&d===0)return;g=d===0;let _=!1;if(j){var N=i.data===rt;N!==(d===0)&&(i=he(),Y(i),V(!1),_=!0)}if(j){for(var m=null,A,b=0;b<d;b++){if(K.nodeType===8&&K.data===ft){i=K,_=!0,V(!1);break}var E=l[b],h=a(E,b);A=xe(K,o,m,null,E,h,b,r,t),o.items.set(h,A),m=A}d>0&&Y(he())}if(!j){var p=ht;Ot(l,o,i,r,t,(p.f&D)!==0,a)}s!==null&&(d===0?f?Ne(f):f=Te(()=>s(i)):f!==null&&st(f,()=>{f=null})),_&&V(!0),n()}),j&&(i=K)}function Ot(e,t,n,a,r,s,i,o){var oe,ue,ce,le;var u=(r&gt)!==0,c=(r&(ee|te))!==0,f=e.length,g=t.items,y=t.first,l=y,d,_=null,N,m=[],A=[],b,E,h,p;if(u)for(p=0;p<f;p+=1)b=e[p],E=i(b,p),h=g.get(E),h!==void 0&&((oe=h.a)==null||oe.measure(),(N??(N=new Set)).add(h));for(p=0;p<f;p+=1){if(b=e[p],E=i(b,p),h=g.get(E),h===void 0){var Xe=l?l.e.nodes_start:n;_=xe(Xe,t,_,_===null?t.first:_.next,b,E,p,a,r),g.set(E,_),m=[],A=[],l=_.next;continue}if(c&&Et(h,b,p,r),h.e.f&D&&(Ne(h.e),u&&((ue=h.a)==null||ue.unfix(),(N??(N=new Set)).delete(h))),h!==l){if(d!==void 0&&d.has(h)){if(m.length<A.length){var z=A[0],w;_=z.prev;var ie=m[0],B=m[m.length-1];for(w=0;w<m.length;w+=1)_e(m[w],z,n);for(w=0;w<A.length;w+=1)d.delete(A[w]);v(t,ie.prev,B.next),v(t,_,ie),v(t,B,z),l=z,_=B,p-=1,m=[],A=[]}else d.delete(h),_e(h,l,n),v(t,h.prev,h.next),v(t,h,_===null?t.first:_.next),v(t,_,h),_=h;continue}for(m=[],A=[];l!==null&&l.k!==E;)(s||!(l.e.f&D))&&(d??(d=new Set)).add(l),A.push(l),l=l.next;if(l===null)continue;h=l}m.push(h),_=h,l=h.next}if(l!==null||d!==void 0){for(var I=d===void 0?[]:Se(d);l!==null;)(s||!(l.e.f&D))&&I.push(l),l=l.next;var q=I.length;if(q>0){var Ze=r&Ce&&f===0?n:null;if(u){for(p=0;p<q;p+=1)(ce=I[p].a)==null||ce.measure();for(p=0;p<q;p+=1)(le=I[p].a)==null||le.fix()}bt(t,I,Ze,g)}}u&&dt(()=>{var fe;if(N!==void 0)for(h of N)(fe=h.a)==null||fe.apply()}),de.first=t.first&&t.first.e,de.last=_&&_.e}function Et(e,t,n,a){a&ee&&pe(e.v,t),a&te?pe(e.i,n):e.i=n}function xe(e,t,n,a,r,s,i,o,u,c){var f=(u&ee)!==0,g=(u&_t)===0,y=f?g?pt(r):ge(r):r,l=u&te?ge(i):i,d={i:l,v:y,k:s,a:null,e:null,prev:n,next:a};try{return d.e=Te(()=>o(e,y,l),j),d.e.prev=n&&n.e,d.e.next=a&&a.e,n===null?t.first=d:(n.next=d,n.e.next=d.e),a!==null&&(a.prev=d,a.e.prev=d.e),d}finally{}}function _e(e,t,n){for(var a=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==a;){var i=mt(s);r.before(s),s=i}}function v(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function x(e){return e===null?"null":e!==Object(e)?typeof e:{}.toString.call(e).slice(8,-1).toLowerCase()}function O(e){return x(e)!=="string"?!0:!e.length}function L(e="",t,n){if(O(e))return!1;const a=e.charCodeAt(0);return t<=a&&a<=n}const me={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},Le={HEPBURN:"hepburn"},kt={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:Le.HEPBURN},wt=65,vt=90,ne=12353,jt=12438,ae=12449,St=12540,Nt=19968,Tt=40879,Ct=12293,Mt=12540,xt=12539,Lt=[0,127],It=[[256,257],[274,275],[298,299],[332,333],[362,363]],Kt=[[8216,8217],[8220,8221]],Rt=[Lt,...It],zt=[[32,47],[58,63],[91,96],[123,126],...Kt];var ye=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Ut(e,t){return!!(e===t||ye(e)&&ye(t))}function Dt(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Ut(e[n],t[n]))return!1;return!0}function Ie(e,t){t===void 0&&(t=Dt);var n=null;function a(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return a.clear=function(){n=null},a}var Ae=Object.prototype.hasOwnProperty;function be(e,t,n){for(n of e.keys())if(C(n,t))return n}function C(e,t){var n,a,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((a=e.length)===t.length)for(;a--&&C(e[a],t[a]););return a===-1}if(n===Set){if(e.size!==t.size)return!1;for(a of e)if(r=a,r&&typeof r=="object"&&(r=be(t,r),!r)||!t.has(r))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(a of e)if(r=a[0],r&&typeof r=="object"&&(r=be(t,r),!r)||!C(a[1],t.get(r)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((a=e.byteLength)===t.byteLength)for(;a--&&e.getInt8(a)===t.getInt8(a););return a===-1}if(ArrayBuffer.isView(e)){if((a=e.byteLength)===t.byteLength)for(;a--&&e[a]===t[a];);return a===-1}if(!n||typeof e=="object"){a=0;for(n in e)if(Ae.call(e,n)&&++a&&!Ae.call(t,n)||!(n in t)||!C(e[n],t[n]))return!1;return Object.keys(t).length===a}}return e!==e&&t!==t}const G=(e={})=>Object.assign({},kt,e);function Ke(e,t,n){const a=t;function r(o,u){if(o[u]!==void 0)return Object.assign({"":o[""]+u},o[u])}function s(o,u){const c=o.charAt(0);return i(Object.assign({"":c},a[c]),o.slice(1),u,u+1)}function i(o,u,c,f){if(!u)return n||Object.keys(o).length===1?o[""]?[[c,f,o[""]]]:[]:[[c,f,null]];if(Object.keys(o).length===1)return[[c,f,o[""]]].concat(s(u,f));const g=r(o,u.charAt(0));return g===void 0?[[c,f,o[""]]].concat(s(u,f)):i(g,u.slice(1),c,f+1)}return s(e,0)}function re(e){return Object.entries(e).reduce((t,[n,a])=>{const r=x(a)==="string";return t[n]=r?{"":a}:re(a),t},{})}function Re(e,t){return t.split("").reduce((n,a)=>(n[a]===void 0&&(n[a]={}),n[a]),e)}function ze(e={}){const t={};return x(e)==="object"&&Object.entries(e).forEach(([n,a])=>{let r=t;n.split("").forEach(s=>{r[s]===void 0&&(r[s]={}),r=r[s]}),r[""]=a}),function(a){const r=JSON.parse(JSON.stringify(a));function s(i,o){return i===void 0||x(i)==="string"?o:Object.entries(o).reduce((u,[c,f])=>(u[c]=s(i[c],f),u),i)}return s(r,t)}}function Ue(e,t){return t?x(t)==="function"?t(e):ze(t)(e):e}const Ht={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},Pt={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},Oe={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},De={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},He={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},Ee={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},Jt=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},He,De),Gt={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},Bt={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function qt(){const e=re(Ht),t=r=>Re(e,r);Object.entries(Oe).forEach(([r,s])=>{Object.entries(De).forEach(([i,o])=>{t(r+i)[""]=s+o})}),Object.entries(Pt).forEach(([r,s])=>{t(r)[""]=s}),Object.entries(Bt).forEach(([r,s])=>{Object.entries(He).forEach(([i,o])=>{const u=t(r+i);u[""]=s+o})}),["n","n'","xn"].forEach(r=>{t(r)[""]="ん"}),e.c=JSON.parse(JSON.stringify(e.k)),Object.entries(Ee).forEach(([r,s])=>{const i=r.slice(0,r.length-1),o=r.charAt(r.length-1),u=t(i);u[o]=JSON.parse(JSON.stringify(t(s)))});function n(r){return[...Object.entries(Ee),["c","k"]].reduce((s,[i,o])=>r.startsWith(o)?s.concat(r.replace(o,i)):s,[])}Object.entries(Jt).forEach(([r,s])=>{const i=g=>g.charAt(g.length-1),o=g=>g.slice(0,g.length-1),u=`x${r}`,c=t(u);c[""]=s;const f=t(`l${o(r)}`);f[i(r)]=c,n(r).forEach(g=>{["l","x"].forEach(y=>{const l=t(y+o(g));l[i(g)]=t(y+r)})})}),Object.entries(Gt).forEach(([r,s])=>{t(r)[""]=s});function a(r){return Object.entries(r).reduce((s,[i,o])=>(i?s[i]=a(o):s[i]=`っ${o}`,s),{})}return[...Object.keys(Oe),"c","y","w","j"].forEach(r=>{const s=e[r];s[r]=a(s)}),delete e.n.n,Object.freeze(JSON.parse(JSON.stringify(e)))}let $=null;function Yt(){return $==null&&($=qt()),$}const Vt=ze({wi:"ゐ",we:"ゑ"});function $t(e){const t=JSON.parse(JSON.stringify(e));return t.n.n={"":"ん"},t.n[" "]={"":"ん"},t}function Wt(e=""){return O(e)?!1:L(e,wt,vt)}function R(e=""){return O(e)?!1:e.charCodeAt(0)===Mt}function Pe(e=""){return O(e)?!1:e.charCodeAt(0)===xt}function Je(e=""){return O(e)?!1:R(e)?!0:L(e,ne,jt)}function H(e=""){const t=[];return e.split("").forEach(n=>{if(R(n)||Pe(n))t.push(n);else if(Je(n)){const a=n.charCodeAt(0)+(ae-ne),r=String.fromCharCode(a);t.push(r)}else t.push(n)}),t.join("")}const Ge=Ie((e,t,n)=>{let a=Yt();return a=e?$t(a):a,a=t?Vt(a):a,n&&(a=Ue(a,n)),a},C);function Q(e="",t={},n){let a;return n?a=t:(a=G(t),n=Ge(a.IMEMode,a.useObsoleteKana,a.customKanaMapping)),Ft(e,a,n).map(r=>{const[s,i,o]=r;if(o===null)return e.slice(s);const u=a.IMEMode===me.HIRAGANA,c=a.IMEMode===me.KATAKANA||[...e.slice(s,i)].every(Wt);return u||!c?o:H(o)}).join("")}function Ft(e="",t={},n){const{IMEMode:a,useObsoleteKana:r,customKanaMapping:s}=t;return n||(n=Ge(a,r,s)),Ke(e.toLowerCase(),n,!a)}function Qt(e=""){return O(e)?!1:Rt.some(([t,n])=>L(e,t,n))}function se(e="",t){const n=x(t)==="regexp";return O(e)?!1:[...e].every(a=>{const r=Qt(a);return n?r||t.test(a):r})}function X(e=""){return L(e,ae,St)}function Xt(e=""){return O(e)?!1:[...e].every(Je)}function Be(e=""){return O(e)?!1:[...e].every(X)}function Zt(e=""){return O(e)?!1:e.charCodeAt(0)===Ct}function en(e=""){return L(e,Nt,Tt)||Zt(e)}function tn(e=""){return O(e)?!1:[...e].every(en)}function qe(e="",t={passKanji:!0}){const n=[...e];let a=!1;return t.passKanji||(a=n.some(tn)),(n.some(Xt)||n.some(Be))&&n.some(se)&&!a}const nn=(e,t)=>R(e)&&t<1,an=(e,t)=>R(e)&&t>0,rn=e=>["ヶ","ヵ"].includes(e),sn={a:"あ",i:"い",u:"う",e:"え",o:"う"};function P(e="",t,{isDestinationRomaji:n,convertLongVowelMark:a}={}){let r="";return e.split("").reduce((s,i,o)=>{if(Pe(i)||nn(i,o)||rn(i))return s.concat(i);if(a&&r&&an(i,o)){const u=t(r).slice(-1);return X(e[o-1])&&u==="o"&&n?s.concat("お"):s.concat(sn[u])}if(!R(i)&&X(i)){const u=i.charCodeAt(0)+(ne-ae),c=String.fromCharCode(u);return r=c,s.concat(c)}return r="",s.concat(i)},[]).join("")}let W=null;const on={あ:"a",い:"i",う:"u",え:"e",お:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",さ:"sa",し:"shi",す:"su",せ:"se",そ:"so",た:"ta",ち:"chi",つ:"tsu",て:"te",と:"to",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",は:"ha",ひ:"hi",ふ:"fu",へ:"he",ほ:"ho",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",や:"ya",ゆ:"yu",よ:"yo",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ざ:"za",じ:"ji",ず:"zu",ぜ:"ze",ぞ:"zo",だ:"da",ぢ:"ji",づ:"zu",で:"de",ど:"do",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",ゔぁ:"va",ゔぃ:"vi",ゔ:"vu",ゔぇ:"ve",ゔぉ:"vo"},un={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~",ー:"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},cn=["あ","い","う","え","お","や","ゆ","よ"],F={ゃ:"ya",ゅ:"yu",ょ:"yo"},ln={ぃ:"yi",ぇ:"ye"},fn={ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},hn=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],dn={し:"sh",ち:"ch",じ:"j",ぢ:"j"},pn={っ:"",ゃ:"ya",ゅ:"yu",ょ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},ke={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function gn(){return W==null&&(W=mn()),W}function _n(e){switch(e){case Le.HEPBURN:return gn();default:return{}}}function mn(){const e=re(on),t=a=>Re(e,a),n=(a,r)=>{t(a)[""]=r};return Object.entries(un).forEach(([a,r])=>{t(a)[""]=r}),[...Object.entries(F),...Object.entries(fn)].forEach(([a,r])=>{n(a,r)}),hn.forEach(a=>{const r=t(a)[""][0];Object.entries(F).forEach(([s,i])=>{n(a+s,r+i)}),Object.entries(ln).forEach(([s,i])=>{n(a+s,r+i)})}),Object.entries(dn).forEach(([a,r])=>{Object.entries(F).forEach(([s,i])=>{n(a+s,r+i[1])}),n(`${a}ぃ`,`${r}yi`),n(`${a}ぇ`,`${r}e`)}),e.っ=Ye(e),Object.entries(pn).forEach(([a,r])=>{n(a,r)}),cn.forEach(a=>{n(`ん${a}`,`n'${t(a)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(e)))}function Ye(e){return Object.entries(e).reduce((t,[n,a])=>{if(n)t[n]=Ye(a);else{const r=a.charAt(0);t[n]=Object.keys(ke).includes(r)?ke[r]+a:a}return t},{})}const Ve=Ie((e,t)=>{let n=_n(e);return t&&(n=Ue(n,t)),n},C);function M(e="",t={},n){const a=G(t);return n||(n=Ve(a.romanization,a.customRomajiMapping)),yn(e,a,n).map(r=>{const[s,i,o]=r;return a.upcaseKatakana&&Be(e.slice(s,i))?o.toUpperCase():o}).join("")}function yn(e,t,n){n||(n=Ve(t.romanization,t.customRomajiMapping));const a=Object.assign({},{isDestinationRomaji:!0},t);return Ke(P(e,M,a),n,!t.IMEMode)}function $e(e=""){return O(e)?!1:zt.some(([t,n])=>L(e,t,n))}function An(e="",t={}){const n=G(t);if(n.passRomaji)return P(e,M,n);if(qe(e,{passKanji:!0})){const a=P(e,M,n);return Q(a.toLowerCase(),n)}return se(e)||$e(e)?Q(e.toLowerCase(),n):P(e,M,n)}function bn(e="",t={}){const n=G(t);if(n.passRomaji)return H(e);if(qe(e)||se(e)||$e(e)){const a=Q(e.toLowerCase(),n);return H(a)}return H(e)}const On=[{key:"kana",label:"Kana",modes_label:"Kana Type",modes:[{key:"katakana",label:"Katakana",modes_label:"Characters to include",modes:[{key:"monographs",label:"Monographs"},{key:"diacritics",label:"+ Diacritics"},{key:"digraphs",label:"+ Digraphs"},{key:"all",label:"All"}]},{key:"hiragana",label:"Hiragana",modes_label:"Characters to include",modes:[{key:"monographs",label:"Monographs"},{key:"diacritics",label:"+ Diacritics"},{key:"digraphs",label:"+ Digraphs"},{key:"all",label:"All"}]}]},{key:"greek",label:"Greek",modes_label:"Mode",modes:[{key:"transcriptions",label:"Transcriptions",modes_label:"Characters to include",modes:[{key:"monographs",label:"Monographs",modes_label:"Case",modes:[{key:"upper",label:"Upper"},{key:"lower",label:"Lower"}]},{key:"digraphs",label:"+ Digraphs",modes_label:"Case",modes:[{key:"upper",label:"Upper"},{key:"lower",label:"Lower"}]}]},{key:"names",label:"Names",modes_label:"Case",modes:[{key:"upper",label:"Upper"},{key:"lower",label:"Lower"}]}]},{key:"cyrillic",label:"Cyrillic",modes_label:"Language",modes:[{key:"bulgarian",label:"Bulgarian",modes_label:"Case",modes:[{key:"upper",label:"Upper"},{key:"lower",label:"Lower"}]},{key:"russian",label:"Russian",modes_label:"Case",modes:[{key:"upper",label:"Upper"},{key:"lower",label:"Lower"}]}]}];function We(e,t=""){return e.map(n=>{const a=t?`${t}-${n.key}`:n.key,r={...n,full_key:a};return n.modes&&(r.modes=We(n.modes,a)),r})}const En=We(On);function kn(e,t=[]){const n=[],a={};function r(s,i){s.forEach(o=>{const u=[...i,o];o.modes?r(o.modes,u):(n.push(o.full_key),a[o.full_key]=u.map(c=>c.key))})}return r(e,t),{keys:n,paths:a}}const{keys:Fe,paths:Kn}=kn(En);function Qe(e){return e.split("-")}const S=Me("game-config",{id:"hiragana-monographs",path:Qe("hiragana-monographs"),is_valid:!0});function Rn(e,t){S.update(n=>{const a=[...n.id.split("-").slice(0,t),e].join("-");return{id:a,path:Qe(a),is_valid:Fe.includes(a)}})}const U={monographs:["あ","い","う","え","お","か","き","く","け","こ","さ","し","す","せ","そ","た","ち","つ","て","と","な","に","ぬ","ね","の","ま","み","む","め","も","は","ひ","ふ","へ","ほ","や","ゆ","よ","ら","り","る","れ","ろ","わ","を","ん"],diacritics:["が","ぎ","ぐ","げ","ご","ざ","じ","ず","ぜ","ぞ","だ","ぢ","づ","で","ど","ば","び","ぶ","べ","ぼ","ぱ","ぴ","ぷ","ぺ","ぽ"],digraphs:["きゃ","きゅ","きょ","しゃ","しゅ","しょ","ちゃ","ちゅ","ちょ","にゃ","にゅ","にょ","ひゃ","ひゅ","ひょ","みゃ","みゅ","みょ","りゃ","りゅ","りょ"],digraphs_diacritics:["ぎゃ","ぎゅ","ぎょ","じゃ","じゅ","じょ","びゃ","びゅ","びょ","ぴゃ","ぴゅ","ぴょ"]},wn=new Map([["し",["shi","si"]],["ち",["chi","ti"]],["つ",["tsu","tu"]],["ふ",["fu","hu"]],["じ",["ji","zi"]],["ぢ",["di","ji"]],["づ",["du","zu"]],["じゃ",["ja","jya"]],["じゅ",["ju","jyu"]],["じょ",["jo","jyo"]]]),k={lower_monographs:["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","ς","τ","υ","φ","χ","ψ","ω"],upper_monographs:["Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω"],digraphs:["ου","αυ","ευ","ηυ","μπ","ντ","γκ","γγ","τζ","γχ","γξ","αι","υι","οι","ει"],names:{α:["alpha"],β:["beta"],γ:["gamma"],δ:["delta"],ε:["epsilon"],ζ:["zeta"],η:["eta"],θ:["theta"],ι:["iota"],κ:["kappa"],λ:["lambda","lamda"],μ:["mu"],ν:["nu"],ξ:["xi"],ο:["omicron","omikron"],π:["pi"],ρ:["rho"],σ:["sigma"],ς:["sigma"],τ:["tau"],υ:["upsilon"],φ:["phi"],χ:["chi"],ψ:["psi"],ω:["omega"]},transcriptions:{α:["a"],β:["v"],γ:["g"],δ:["d"],ε:["e"],ζ:["z"],η:["i"],θ:["th"],ι:["i"],κ:["k"],λ:["l"],μ:["m"],ν:["n"],ξ:["x","ks"],ο:["o"],π:["p"],ρ:["r","rh"],σ:["s"],ς:["s"],τ:["t"],υ:["y","u"],φ:["ph"],χ:["kh","ch"],ψ:["ps"],ω:["o"],ου:["u"],αυ:["af","av"],ευ:["ef","ev"],ηυ:["if","iv"],μπ:["b","mb"],ντ:["d","nd"],γκ:["g","ng","nk"],γγ:["g","ng","ngh"],τζ:["dz","tz"],ωυ:["oi"],γχ:["nkh"],γξ:["nx"],αι:["e"],υι:["i"],οι:["i"],ει:["i"]}},J={bg_lower:["а","б","в","г","д","е","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ь","ю","я"],ru_lower:["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"],bg_transcriptions:{а:["a"],б:["b"],в:["v"],г:["g"],д:["d"],е:["e"],ж:["zh"],з:["z"],и:["i"],й:["y","i"],к:["k"],л:["l"],м:["m"],н:["n"],о:["o"],п:["p"],р:["r"],с:["s"],т:["t"],у:["u"],ф:["f"],х:["kh"],ц:["ts","c"],ч:["ch"],ш:["sh"],щ:["sht"],ъ:["a","uh"],ь:["y","i"],ю:["yu","ju"],я:["ya","ja"]},ru_transcriptions:{а:["a"],б:["b"],в:["v"],г:["g"],д:["d"],е:["ye","e"],ё:["yo"],ж:["zh"],з:["z"],и:["i"],й:["y","i"],к:["k"],л:["l"],м:["m"],н:["n"],о:["o"],п:["p"],р:["r"],с:["s"],т:["t"],у:["u"],ф:["f"],х:["kh","h"],ц:["ts","c"],ч:["ch"],ш:["sh"],щ:["shch","sch"],ъ:["-",""],ы:["y"],ь:["-",""],э:["e"],ю:["yu","ju"],я:["ya","ja"]}};function Z(e){var t;switch((t=T(S))==null?void 0:t.path[0]){case"kana":return wn.get(An(e))??[M(e)];case"greek":switch(T(S).path[1]){case"transcriptions":return k.transcriptions[e.toLowerCase()];case"names":return k.names[e.toLowerCase()];default:return[]}case"cyrillic":switch(T(S).path[1]){case"bulgarian":return J.bg_transcriptions[e.toLowerCase()];case"russian":return J.ru_transcriptions[e.toLowerCase()];default:return[]}default:return[]}}function zn(e){return Z(e)[0]==="-"}function Un(e,t){var n;if(!((n=T(S))!=null&&n.is_valid))return!1;switch(T(S).path[0]){case"kana":return Z(t).includes(M(e.toLowerCase()));default:return Z(t).includes(e)}}function Dn(e,t,n,a,r){return(e-t)*(r-a)/(n-t)+a}function vn(e,t,n){return Math.min(Math.max(e,t),n)}function Hn(e){return vn(e,0,1)}function Pn(e,t=1){return t=Math.max(t,.1),e<.5?Math.pow(2*e,t)/2:1-Math.pow(2*(1-e),t)/2}function Jn(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Gn(e){if(e==null||e<0)return"--:--.-";const[t,n]=e.toFixed(1).split("."),a=Math.floor(Number(t)/60).toString().padStart(2,"0"),r=(Number(t)%60).toString().padStart(2,"0");return`${a}:${r}.${n}`}function jn(e){const t=[...e];for(let n=t.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[t[n],t[a]]=[t[a],t[n]]}return t}function we(e){return[...U.monographs,...["all","diacritics"].includes(e)?U.diacritics:[],...["all","digraphs"].includes(e)?U.digraphs:[],...e==="all"?U.digraphs_diacritics:[]]}const Sn=yt(S,e=>{if(!e.is_valid)return[];switch(e.path[0]){case"kana":switch(e.path[1]){case"hiragana":return we(e.path[2]);case"katakana":return we(e.path[2]).map(t=>bn(t));default:return[]}case"greek":switch(e.path[1]){case"transcriptions":switch(e.path[2]){case"monographs":switch(e.path[3]){case"upper":return k.upper_monographs;case"lower":return k.lower_monographs;default:return[]}case"digraphs":switch(e.path[3]){case"upper":return[...k.upper_monographs,...k.digraphs].map(t=>t.toUpperCase());case"lower":return[...k.lower_monographs,...k.digraphs];default:return[]}default:return[]}case"names":switch(e.path[2]){case"upper":return k.upper_monographs;case"lower":return k.lower_monographs;default:return[]}default:return[]}case"cyrillic":switch(e.path[1]){case"bulgarian":{const t=J.bg_lower;switch(e.path[2]){case"upper":return t.map(n=>n.toUpperCase());case"lower":return t;default:return[]}}case"russian":{const t=J.ru_lower;switch(e.path[2]){case"upper":return t.map(n=>n.toUpperCase());case"lower":return t;default:return[]}}default:return[]}default:return[]}});function ve(e){return{items:jn(e).map((n,a)=>({id:`item-${a}`,glyph:n})),current_idx:0}}function Nn(){let e=[];Sn.subscribe(n=>{e=n});const t=Me("quiz-session",ve(e));return{subscribe:t.subscribe,reset(){t.set(ve(e))},sync(n,a,r){t.update(()=>({items:n,current_idx:a,is_timing:r}))},updateIndex(n){t.update(({items:a})=>({items:a,current_idx:n}))},updateItem(n,a){t.update(({items:r,current_idx:s})=>(r[n]=a(r[n]),{items:r,current_idx:s}))},updateTiming(n){t.update(({items:a,current_idx:r})=>({items:a,current_idx:r,is_timing:n}))}}}const Bn=Nn(),Tn=Fe.reduce((e,t)=>(e[t]=-1,e),{}),je=At("high-scores",Tn);function qn(e,t){const n=T(je)[e];(n<0||t<n)&&je.update(a=>({...a,[e]:t}))}export{zn as a,Z as b,On as c,Sn as d,In as e,Gn as f,S as g,je as h,Ln as i,Pn as j,Hn as k,Un as l,Dn as m,qn as n,Bn as q,Jn as r,Rn as u};
