import{h as i,p as v,c as x,g as f,e as C,t as k,a as m,b as A,d as c,f as z,s as S,i as q}from"./dictionary.SNMvn4VU.js";import{g as a}from"./index.C7ygDqEZ.js";import{s as H,l as I}from"./persistent-stores.5fR2uNy4.js";function u(t){var n;const s=(n=a(c))==null?void 0:n.path;switch(s[0]){case"kana":return C.get(k(t))??[m(t)];case"greek":switch(s[1]){case"transcriptions":return f.transcriptions[t.toLowerCase()];case"names":return f.names[t.toLowerCase()];default:return[]}case"cyrillic":return x.transcriptions[s[1]][t.toLowerCase()];case"persoarabic":{const r=v.transcriptions[s[1]];switch(s[1]){case"arabic":return r[s[2]][d(t)];default:return r[d(t)]}}case"hangul":switch(s[1]){case"vowels":return i.transcriptions.vowels[t];case"consonants":switch(s[2]){case"choseong":return i.transcriptions.initial[t];case"batchim":return i.transcriptions.final[t];default:return[]}case"syllables":return L(t)}default:return[]}}function y(t){return u(t)[0]==="-"}function d(t){for(const[s,n]of Object.entries(A))if(Object.values(n).includes(t))return n.isolated;return null}function L(t){if(t.length!==1||t.charCodeAt(0)<44032||t.charCodeAt(0)>55203)throw new Error("Invalid Hangul syllable input.");const s=t.charCodeAt(0)-44032,n=Math.floor(s/588),r=Math.floor(s%588/28),e=s%28,o=i.glyphs.initial_consonants[n],h=i.glyphs.vowels[r],w=e>0?i.glyphs.final_consonants[e-1]:"",l=i.transcriptions.initial[o][0],g=i.transcriptions.vowels[h][0],b=e>0?i.transcriptions.final[w][0]:"";return[(l=="-"?"":l)+g+b]}function E(t,s){var n;if(!((n=a(c))!=null&&n.is_valid))return!1;switch(a(c).path[0]){case"kana":return u(s).includes(m(t.toLowerCase()));default:return u(s).includes(t)}}function p(t){return{items:S(t).map((n,r)=>({id:`item-${r}`,glyph:n})),current_idx:0}}function j(){let t=[];z.subscribe(n=>{t=n});const s=H("quiz-session",p(t));return{subscribe:s.subscribe,reset(){s.set(p(t))},sync(n,r,e){s.update(()=>({items:n,current_idx:r,is_timing:e}))},updateIndex(n){s.update(({items:r})=>({items:r,current_idx:n}))},updateItem(n,r){s.update(({items:e,current_idx:o})=>(e[n]=r(e[n]),{items:e,current_idx:o}))},updateTiming(n){s.update(({items:r,current_idx:e})=>({items:r,current_idx:e,is_timing:n}))}}}const F=j(),M=q.reduce((t,s)=>(t[s]=-1,t),{}),_=I("high-scores",M);function R(t,s){const n=a(_)[t];return n<0||s<n?(_.update(r=>({...r,[t]:s})),!0):!1}export{u as a,E as b,d as g,_ as h,y as i,F as q,R as u};
